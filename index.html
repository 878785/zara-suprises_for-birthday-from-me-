<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Happy Birthday Zara üéâ</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Caveat:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#ffd6ee; --bg2:#f8d7ff; --accent:#ff5aa5; --accent-2:#8b5cf6;
      --glass: rgba(255,255,255,0.6);
      --text:#2b2b2b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;font-family:'Poppins',system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;
      color:var(--text);
      background: radial-gradient(1000px 500px at 10% 10%, #fff2f8 0%, transparent 20%), linear-gradient(135deg,var(--bg1),var(--bg2));
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
      touch-action:manipulation;
    }

    /* Container */
    .container{max-width:1100px;margin:0 auto;padding:16px}

    /* Navigation */
    .nav{position:sticky;top:0;background:var(--glass);backdrop-filter:blur(6px);padding:12px;border-bottom:1px solid rgba(0,0,0,0.05);z-index:1000}
    .nav a{display:inline-block;margin:0 8px;color:var(--text);text-decoration:none;font-weight:600;font-size:14px}
    .nav a:hover,.nav a:focus{color:var(--accent)}

    /* HERO */
    .hero{display:flex;gap:16px;align-items:center;padding:24px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.3));box-shadow:0 8px 30px rgba(0,0,0,0.08);backdrop-filter: blur(6px);flex-direction:column}
    @media(min-width:768px){.hero{flex-direction:row}}
    .hero-left{flex:1}
    .greeting{font-size:28px;margin:0 0 8px 0}
    .greeting .name{background:linear-gradient(90deg,var(--accent),var(--accent-2));-webkit-background-clip:text;background-clip:text;color:transparent;font-weight:700}
    .hero p{margin:6px 0 0 0;color:#4b4b4b;font-size:14px}
    .controls{margin-top:16px;display:flex;gap:8px;flex-wrap:wrap}
    .btn{background:var(--accent);color:white;border:none;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600;font-size:14px;box-shadow:0 4px 12px rgba(255,90,165,0.18);touch-action:manipulation}
    .btn.secondary{background:white;color:var(--accent);box-shadow:0 4px 8px rgba(0,0,0,0.06);border:1px solid rgba(0,0,0,0.04)}
    .btn:hover,.btn:focus{transform:scale(1.05);transition:transform 0.2s}

    /* Slideshow */
    .slideshow{width:100%;max-width:360px;height:240px;border-radius:12px;overflow:hidden;box-shadow:0 8px 24px rgba(0,0,0,0.08);position:relative}
    .slideshow img{width:100%;height:100%;object-fit:cover;display:none}
    .slideshow img.active{display:block}
    .slideshow img:first-child{display:block}

    /* typing */
    .type{font-weight:600;color:#333;margin-type:8px}

    /* floating music button */
    .music-float{position:fixed;right:16px;bottom:16px;width:48px;height:48px;border-radius:50%;display:grid;place-items:center;box-shadow:0 8px 24px rgba(139,92,246,0.2);background:linear-gradient(180deg,var(--accent),var(--accent-2));color:white;z-index:9999;border:none;cursor:pointer;font-size:20px}

    /* Gallery */
    .section{margin-top:24px}
    .gallery-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px}
    .polaroid{background:var(--glass);padding:10px;border-radius:10px;transform:rotate(-1deg);box-shadow:0 6px 20px rgba(0,0,0,0.08);cursor:pointer;transition:transform .25s;display:flex;flex-direction:column;align-items:center}
    .polaroid img{width:100%;height:140px;object-fit:cover;border-radius:6px}
    .polaroid:hover{transform:translateY(-4px) rotate(0deg)}
    .caption{margin-top:6px;font-size:12px;color:#444}

    /* Lightbox */
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;padding:16px;z-index:10000}
    .lightbox img{max-width:90%;max-height:80%;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,0.6)}
    .lightbox .close{position:absolute;top:12px;right:12px;background:white;border-radius:50%;width:32px;height:32px;display:grid;place-items:center;cursor:pointer;font-size:16px}

    /* Video */
    .video-card{padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.5));box-shadow:0 8px 24px rgba(0,0,0,0.06)}
    video{width:100%;border-radius:8px}

    /* Gift */
    .gift-wrapper{display:flex;align-items:center;gap:12px}
    .gift{width:100px;height:100px;background:linear-gradient(180deg,#ff6faa,#ff3d8b);border-radius:12px;display:grid;place-items:center;color:white;font-weight:700;cursor:pointer;box-shadow:0 10px 24px rgba(255,61,139,0.2)}
    .gift.open{transform:translateY(-6px) rotate(-6deg)}
    .gift-msg{max-width:600px;padding:10px;background:white;border-radius:8px;display:none}
    .gift-reveal{text-align:center;padding:12px;background:white;border-radius:10px;margin-top:12px;display:none}
    .gift-reveal img{max-width:180px;border-radius:6px}

    /* Love Letter */
    .letter-card{padding:16px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.5));box-shadow:0 8px 24px rgba(0,0,0,0.06);font-family:'Caveat',cursive;font-size:16px;line-height:1.5}
    .letter-card h3{font-size:22px;margin-top:0}

    /* Birthday Cake */
    .cake-container{text-align:center;margin:20px 0}
    .cake{width:180px;height:140px;background:linear-gradient(180deg,#ffe4e6,#f9a8d4);border-radius:10px;position:relative}
    .candle{position:absolute;width:8px;height:36px;background:#ff6b6b;border-radius:4px;top:-28px}
    .candle.flame::after{content:'';position:absolute;bottom:34px;left:1px;width:6px;height:10px;background:#ffd700;border-radius:50%;animation:flame 0.5s infinite alternate}
    @keyframes flame{to{transform:scale(1.2)}}

    /* Guestbook */
    .guestbook-form{margin-top:12px;display:flex;gap:8px}
    .guestbook-form input{flex:1;padding:8px;border:1px solid #ddd;border-radius:6px;font-size:14px}
    .guestbook-messages{margin-top:12px;max-height:180px;overflow-y:auto}
    .guestbook-message{padding:8px;border-bottom:1px solid #eee;font-size:14px}

    /* Social Share */
    .share-buttons{margin-top:12px;display:flex;gap:8px}
    .share-btn{background:#555;color:white;padding:6px;border-radius:6px;cursor:pointer;font-size:12px}

    /* confetti (small pieces) */
    .confetti-piece{position:fixed;top:-10px;width:8px;height:12px;opacity:0.95;border-radius:2px;z-index:9998}

    /* wish modal & quiz modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.4);z-index:10005}
    .modal-card{background:white;padding:16px;border-radius:10px;max-width:480px;width:90%;box-shadow:0 12px 30px rgba(0,0,0,0.12)}
    .modal-card h3{font-size:18px}

    /* fireworks canvas */
    #fireworks{position:fixed;inset:0;pointer-events:none;z-index:10006}

    /* responsive */
    @media(min-width:768px){
      .hero{padding:32px}
      .greeting{font-size:36px}
      .container{padding:24px}
      .nav a{font-size:16px}
      .btn{padding:10px 14px;font-size:16px}
      .slideshow{height:280px}
      .cake{width:200px;height:150px}
      .gift{width:120px;height:120px}
      .letter-card{font-size:18px}
      .letter-card h3{font-size:24px}
      .guestbook-form input{font-size:16px}
      .share-btn{font-size:14px}
    }
  </style>
</head>
<body>
  <nav class="nav">
    <a href="#hero">Home</a>
    <a href="#gallery">Gallery</a>
    <a href="#videos">Video</a>
    <a href="#gift">Gift</a>
    <a href="#letter">Letter</a>
    <a href="#guestbook">Guestbook</a>
  </nav>

  <div class="container">
    <header class="hero" id="hero">
      <div class="hero-left">
        <h1 class="greeting">Happy Birthday <span class="name type" id="typed">Zara</span></h1>
        <p>To my dearest Zara ‚Äî your smile lights up every room. Here's a little surprise from me ‚ù§Ô∏è</p>
        <div class="controls">
          <button class="btn" id="openGift">üéÅ Open Gift</button>
          <button class="btn secondary" id="confettiBtn">üéä Celebrate</button>
          <button class="btn secondary" id="wishBtn">Make a Wish ‚ú®</button>
          <button class="btn secondary" id="quizBtn">Quiz: How well do you know Zara?</button>
        </div>
      </div>
      <div class="slideshow" id="slideshow">
        <img src="assets/top-photo.jpg" alt="Slideshow 1" class="active">
        <img src="assets/photo2.jpg" alt="Slideshow 2">
        <img src="assets/photo3.jpg" alt="Slideshow 3">
        <img src="assets/photo4.jpg" alt="Slideshow 4">
        <img src="assets/photo5.jpg" alt="Slideshow 5">
        <img src="assets/photo6.jpg" alt="Slideshow 6">
        <img src="assets/photo7.jpg" alt="Slideshow 7">
      </div>
    </header>

    <!-- Gallery -->
    <section class="section" id="gallery">
      <h2>Our Memories</h2>
      <div class="gallery-grid" id="galleryGrid">
        <div class="polaroid" data-src="assets/photo1.jpg"><img src="assets/photo1.jpg" alt="1"><div class="caption">That coffee day ‚òï</div></div>
        <div class="polaroid" data-src="assets/photo2.jpg"><img src="assets/photo2.jpg" alt="2"><div class="caption">Roadtrip vibes üöó</div></div>
        <div class="polaroid" data-src="assets/photo3.jpg"><img src="assets/photo3.jpg" alt="3"><div class="caption">Party smiles üéâ</div></div>
        <div class="polaroid" data-src="assets/photo4.jpg"><img src="assets/photo4.jpg" alt="4"><div class="caption">Silly day üòÇ</div></div>
        <div class="polaroid" data-src="assets/photo5.jpg"><img src="assets/photo5.jpg" alt="5"><div class="caption">Sunset walks üåá</div></div>
        <div class="polaroid" data-src="assets/photo6.jpg"><img src="assets/photo6.jpg" alt="6"><div class="caption">Study buddies üìö</div></div>
        <div class="polaroid" data-src="assets/photo7.jpg"><img src="assets/photo7.jpg" alt="7"><div class="caption">Forever besties üíï</div></div>
      </div>
    </section>

    <!-- Video -->
    <section class="section" id="videos">
      <h2>Special Video</h2>
      <div class="video-card">
        <h3>Love Video</h3>
        <video id="loveVideo" controls poster="assets/love-video-poster.jpg">
          <source src="assets/love-video.mp4" type="video/mp4">
          Your browser doesn't support HTML5 video.
        </video>
      </div>
    </section>

    <!-- Birthday Cake -->
    <section class="section" id="cake">
      <h2>Blow the Candles!</h2>
      <div class="cake-container">
        <div class="cake" id="cake">
          <div class="candle flame" style="left:60px"></div>
          <div class="candle flame" style="left:90px"></div>
          <div class="candle flame" style="left:120px"></div>
        </div>
        <button class="btn" id="blowCandles" style="margin-top:12px">Blow Candles üéÇ</button>
      </div>
    </section>

    <!-- Gift reveal -->
    <section class="section" id="gift">
      <h2>Open Your Gift</h2>
      <div class="gift-wrapper">
        <div class="gift" id="giftBox">üéÅ</div>
        <div class="gift-msg" id="giftMsg"><h3>Happy Birthday Zara!</h3><p>You are loved more than words. Keep shining ‚ú®</p></div>
      </div>
      <div class="gift-reveal" id="giftReveal">
        <h3>Your Special Gift!</h3>
        <p>A personalized digital voucher for a <strong>weekend getaway</strong> to your favorite destination! üèñÔ∏è</p>
        <img src="assets/gift-voucher.jpg" alt="Gift Voucher">
        <p>Redeem anytime within a year. Let's plan it together! ‚ù§Ô∏è</p>
      </div>
    </section>

    <!-- Love Letter -->
    <section class="section" id="letter">
      <h2>A Letter for You</h2>
      <div class="letter-card">
        <h3>Dear Zara,</h3>
        <p>Today is all about celebrating you ‚Äî the most incredible, kind-hearted, and radiant soul I know. Your laughter is my favorite melody, and your strength inspires me every day. We've shared countless memories, from late-night talks to spontaneous adventures, and each one is a treasure I'll hold forever.</p>
        <p>On your special day, I want you to know how much you mean to me. You're not just a friend ‚Äî you're family, my confidante, my partner-in-crime. May this year bring you all the joy, love, and dreams you deserve. Here's to more coffee dates, more giggles, and more moments that make life beautiful.</p>
        <p>With all my love, <br>Your Bestie ‚ù§Ô∏è</p>
      </div>
    </section>

    <!-- Guestbook -->
    <section class="section" id="guestbook">
      <h2>Leave a Message for Zara</h2>
      <div class="guestbook-form">
        <input type="text" id="guestName" placeholder="Your Name">
        <input type="text" id="guestMessage" placeholder="Your Message">
        <button class="btn" id="submitMessage">Send</button>
      </div>
      <div class="guestbook-messages" id="guestbookMessages"></div>
      <div class="share-buttons">
        <button class="share-btn" onclick="share('twitter')">Share on Twitter</button>
        <button class="share-btn" onclick="share('facebook')">Share on Facebook</button>
        <button class="share-btn" onclick="share('whatsapp')">Share on WhatsApp</button>
      </div>
    </section>

    <footer style="margin:32px 0 64px 0;text-align:center;color:#555">
      <small>Made by sumit only for my bestie -- zara -- My bestie</small>
    </footer>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox">
    <div class="close" id="lbClose">‚úï</div>
    <img id="lbImg" src="" alt=""> 
  </div>

  <!-- Modals -->
  <div class="modal" id="wishModal"><div class="modal-card"><h3>Make a Wish ‚ú®</h3><p id="wishText" style="margin:12px 0">Click the button to reveal a sweet wish for Zara.</p><div style="display:flex;gap:8px;justify-content:flex-end"><button class="btn secondary" id="wishClose">Close</button><button class="btn" id="wishReveal">Reveal Wish</button></div></div></div>

  <div class="modal" id="quizModal"><div class="modal-card"><h3>Quiz: How well do you know Zara?</h3><div id="quizArea" style="margin-top:12px"></div><div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px"><button class="btn secondary" id="quizClose">Close</button><button class="btn" id="quizStart">Start Quiz</button></div></div></div>

  <!-- Fireworks canvas -->
  <canvas id="fireworks"></canvas>

  <!-- Background music playlist (hidden audio element) -->
  <audio id="bgAudio" loop preload="none">
    <source id="audioSrc" src="assets/zara-song.mp3" type="audio/mpeg">
  </audio>

  <!-- Floating music/play button -->
  <button class="music-float" id="musicBtn" title="Play/Pause Music">üéµ</button>

  <script>
    /* ---------- Smooth Scroll ---------- */
    document.querySelectorAll('.nav a').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
      });
    });

    /* ---------- Simple typing effect ---------- */
    (function(){
      const el = document.getElementById('typed');
      const name = 'Zara';
      let i=0; function tick(){ el.textContent = name.substring(0,i); i++; if(i<=name.length) setTimeout(tick,120); }
      setTimeout(tick,600);
    })();

    /* ---------- Slideshow ---------- */
    let slideshowInterval = null;
    function startSlideshow() {
      const slides = document.querySelectorAll('.slideshow img');
      let current = 0;
      clearInterval(slideshowInterval);
      slideshowInterval = setInterval(() => {
        slides[current].classList.remove('active');
        current = (current + 1) % slides.length;
        slides[current].classList.add('active');
      }, 3000);
    }
    function stopSlideshow() {
      clearInterval(slideshowInterval);
      slideshowInterval = null;
      const slides = document.querySelectorAll('.slideshow img');
      slides.forEach(s => s.classList.remove('active'));
      slides[0].classList.add('active');
    }

    /* ---------- Lightbox for gallery ---------- */
    const lightbox = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    const lbClose = document.getElementById('lbClose');
    document.querySelectorAll('.polaroid').forEach(p=>{
      p.addEventListener('click',()=>{
        const src = p.dataset.src || p.querySelector('img').src;
        lbImg.src = src; lightbox.style.display='flex';
      })
    });
    lbClose.addEventListener('click',()=> lightbox.style.display='none');
    lightbox.addEventListener('click', e=>{ if(e.target===lightbox) lightbox.style.display='none'});

    /* ---------- Gift reveal ---------- */
    const gift = document.getElementById('giftBox');
    const giftMsg = document.getElementById('giftMsg');
    const giftReveal = document.getElementById('giftReveal');
    document.getElementById('openGift').addEventListener('click', ()=>{
      gift.classList.toggle('open');
      if(gift.classList.contains('open')){ 
        giftMsg.style.display='block'; 
        giftReveal.style.display='block'; 
        startConfetti(900); 
        startSlideshow();
        const rect = gift.getBoundingClientRect(); 
        launchFire(rect.left+rect.width/2, rect.top);
      } else {
        giftMsg.style.display='none';
        giftReveal.style.display='none';
        stopSlideshow();
      }
    });

    /* ---------- Confetti ---------- */
    function rand(min,max){return Math.random()*(max-min)+min}
    function makePiece(){
      const el = document.createElement('div'); el.className='confetti-piece';
      el.style.left = rand(0,100)+'vw'; el.style.background = `hsl(${Math.floor(rand(0,360))}deg 80% 60%)`;
      el.style.width = (6+Math.random()*8)+'px'; el.style.height = (8+Math.random()*12)+'px';
      document.body.appendChild(el);
      const duration = 3000 + Math.random()*2000;
      el.animate([{transform:`translateY(0) rotate(0deg)`, opacity:1},{transform:`translateY(${window.innerHeight+100}px) rotate(${rand(200,800)}deg)`, opacity:0}],{duration:duration,iterations:1,easing:'cubic-bezier(.2,.8,.2,1)'});
      setTimeout(()=>el.remove(),duration+50);
    }
    function startConfetti(count=60, interval=12){
      let i=0; const t = setInterval(()=>{ makePiece(); i++; if(i>=count) clearInterval(t); }, interval);
    }
    document.getElementById('confettiBtn').addEventListener('click', ()=> startConfetti(120,6));

    /* ---------- Floating balloon effect (gentle) ---------- */
    (function spawnBalloons(){
      const colors = ['#ff6faa','#ffd86b','#8b5cf6','#60a5fa','#34d399'];
      setInterval(()=>{
        const b = document.createElement('div'); b.style.position='fixed'; b.style.left = Math.random()*100+'vw'; b.style.bottom='-60px'; b.style.width='32px'; b.style.height='44px'; b.style.borderRadius='16px'; b.style.background = colors[Math.floor(Math.random()*colors.length)]; b.style.opacity=0.95; b.style.zIndex=2000; b.style.boxShadow='0 6px 16px rgba(0,0,0,0.12)';
        document.body.appendChild(b);
        const dur = 9000 + Math.random()*7000;
        b.animate([{transform:'translateY(0) rotate(0deg)',opacity:0.0},{transform:`translateY(-${window.innerHeight+200}px) rotate(${Math.random()*60-30}deg)`,opacity:1}],{duration:dur,iterations:1,easing:'linear'});
        setTimeout(()=>b.remove(),dur+50);
      },3000);
    })();

    /* ---------- Make-a-wish ---------- */
    const wishes = [
      'May your year be filled with laughter and big adventures!',
      'Wishing you endless joy, love, and success ‚ù§Ô∏è',
      'May every day bring you a reason to smile! ‚òÄÔ∏è',
      'To more memories, more coffee dates, and late-night talks ‚òï',
      'Stay beautiful, stay bold ‚Äî Happy Birthday!' 
    ];
    const wishBtn = document.getElementById('wishBtn'); const wishModal = document.getElementById('wishModal');
    document.getElementById('wishReveal').addEventListener('click', ()=>{
      document.getElementById('wishText').textContent = wishes[Math.floor(Math.random()*wishes.length)];
    });
    wishBtn.addEventListener('click', ()=>{ wishModal.style.display='flex'; });
    document.getElementById('wishClose').addEventListener('click', ()=> wishModal.style.display='none');

    /* ---------- Mini quiz ---------- */
    const quizData = [
      {q:'Which is Zara\'s favorite drink?', a:['Coffee','Green Tea','Cold Drink'], correct:0},
      {q:'What does Zara love to do on weekends?', a:['Read books','Road trips','Dance'], correct:1},
      {q:'Which color suits Zara most?', a:['Pink','Black','Yellow'], correct:0}
    ];
    const quizModal = document.getElementById('quizModal');
    document.getElementById('quizBtn').addEventListener('click', ()=> quizModal.style.display='flex');
    document.getElementById('quizClose').addEventListener('click', ()=> quizModal.style.display='none');
    document.getElementById('quizStart').addEventListener('click', ()=> startQuiz());
    function startQuiz(){
      const area = document.getElementById('quizArea'); area.innerHTML=''; let score=0; quizData.forEach((item,idx)=>{
        const div = document.createElement('div'); div.style.margin='8px 0'; div.innerHTML = `<strong>${idx+1}. ${item.q}</strong>`;
        item.a.forEach((opt,optIdx)=>{
          const b = document.createElement('button'); b.className='btn secondary'; b.style.margin='4px 4px 0 0'; b.textContent = opt; b.onclick = ()=>{ if(optIdx===item.correct){score++; b.style.border='2px solid #34d399'} else {b.style.border='2px solid #ff6b6b'} b.disabled=true; }
          div.appendChild(b);
        }); area.appendChild(div);
      });
      const res = document.createElement('div'); res.style.marginTop='10px'; res.innerHTML = `<strong>Your score:</strong> <span id='score'>0</span>`;
      const finish = document.createElement('button'); finish.className='btn'; finish.style.marginLeft='10px'; finish.textContent='Finish'; finish.onclick = ()=>{ document.getElementById('score').textContent = score + '/' + quizData.length; };
      area.appendChild(res); area.appendChild(finish);
    }

    /* ---------- Music controls + playlist ---------- */
    const bgAudio = document.getElementById('bgAudio'); const musicBtn = document.getElementById('musicBtn');
    let playing=false;
    function toggleMusic(){ 
      if(bgAudio.paused){ bgAudio.play().catch(()=>{}); musicBtn.textContent='‚è∏'; playing=true; } 
      else { bgAudio.pause(); musicBtn.textContent='üéµ'; playing=false } 
    }
    musicBtn.addEventListener('click', toggleMusic);
    const playlist = ['assets/zara-song.mp3','assets/song2.mp3']; 
    let currentTrack=0;
    function setTrack(i){ 
      currentTrack=i; 
      document.getElementById('audioSrc').src = playlist[i]; 
      bgAudio.load(); 
      if(playing) bgAudio.play().catch(()=>{}); 
    }
    bgAudio.addEventListener('ended', () => {
      currentTrack = (currentTrack + 1) % playlist.length;
      setTrack(currentTrack);
    });

    /* ---------- Fireworks (simple) ---------- */
    const canvas = document.getElementById('fireworks'); const ctx = canvas.getContext('2d');
    function resizeCanvas(){ canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    resizeCanvas(); window.addEventListener('resize', resizeCanvas);
    let fireWorks = [];
    function launchFire(x,y){
      const hue = Math.floor(Math.random()*360);
      for(let i=0;i<60;i++){ fireWorks.push({x:x,y:y, vx: (Math.random()-0.5)*6, vy: (Math.random()-1.5)*6, life:80+Math.random()*40, size:2+Math.random()*3, hue}) }
    }
    function loop(){ 
      ctx.clearRect(0,0,canvas.width,canvas.height); 
      for(let i=fireWorks.length-1;i>=0;i--){ 
        const p=fireWorks[i]; p.x+=p.vx; p.y+=p.vy; p.vy+=0.06; p.life--; 
        ctx.fillStyle = `hsl(${p.hue} 100% 60%)`; ctx.beginPath(); ctx.arc(p.x,p.y,p.size,0,Math.PI*2); ctx.fill(); 
        if(p.life<=0) fireWorks.splice(i,1);
      } 
      requestAnimationFrame(loop); 
    }
    loop();
    document.getElementById('openGift').addEventListener('click', ()=>{ 
      const rect = gift.getBoundingClientRect(); 
      launchFire(rect.left+rect.width/2, rect.top); 
    });

    /* ---------- Birthday Cake ---------- */
    document.getElementById('blowCandles').addEventListener('click', () => {
      document.querySelectorAll('.candle').forEach(candle => candle.classList.remove('flame'));
      startConfetti(100, 10);
    });

    /* ---------- Guestbook with localStorage ---------- */
    function loadGuestbook() {
      const messages = JSON.parse(localStorage.getItem('guestbook') || '[]');
      const guestbookMessages = document.getElementById('guestbookMessages');
      guestbookMessages.innerHTML = '';
      messages.forEach(msg => {
        const msgDiv = document.createElement('div');
        msgDiv.className = 'guestbook-message';
        msgDiv.innerHTML = `<strong>${msg.name}:</strong> ${msg.message}`;
        guestbookMessages.prepend(msgDiv);
      });
    }

    document.getElementById('submitMessage').addEventListener('click', () => {
      const name = document.getElementById('guestName').value.trim();
      const message = document.getElementById('guestMessage').value.trim();
      if (name && message) {
        const messages = JSON.parse(localStorage.getItem('guestbook') || '[]');
        messages.unshift({ name, message }); // Add new message to the beginning
        localStorage.setItem('guestbook', JSON.stringify(messages));
        document.getElementById('guestName').value = '';
        document.getElementById('guestMessage').value = '';
        loadGuestbook(); // Reload to display newest message at top
      }
    });

    // Load guestbook messages on page load
    window.addEventListener('load', loadGuestbook);

    /* ---------- Social Sharing ---------- */
    function share(platform) {
      const url = window.location.href;
      const text = "Celebrate Zara's Birthday! üéâ Check out this awesome surprise!";
      let shareUrl = '';
      if (platform === 'twitter') {
        shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
      } else if (platform === 'facebook') {
        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
      } else if (platform === 'whatsapp') {
        shareUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(text + ' ' + url)}`;
      }
      window.open(shareUrl, '_blank');
    }

    /* ---------- small helper: start confetti quickly ---------- */
    function startConfettiBrief(){ startConfetti(80,8); }
    setTimeout(()=> startConfettiBrief(),900);
  </script>
</body>
</html>